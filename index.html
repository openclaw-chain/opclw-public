<!DOCTYPE html>
<html>
<head>
  <title>OPCLW Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="background: #080c1f; color: #fff; font-family: sans-serif;">
  
  <!-- LOGIN GATE -->
  <div id="login-gate" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #080c1f; display: flex; justify-content: center; align-items: center;">
    <div style="background: #0d1230; padding: 40px; border-radius: 12px; max-width: 400px; width: 90%; border: 1px solid #1a2050;">
      <h2 style="color: #00d4ff;">ðŸ”’ Admin Login</h2>
      <p style="color: #8e8ea0;">Dashboard is in private beta.</p>
      <input type="email" id="email" placeholder="Email" style="width: 100%; padding: 12px; margin: 8px 0; background: #080c1f; border: 1px solid #1a2050; border-radius: 8px; color: #fff;">
      <input type="password" id="password" placeholder="Password" style="width: 100%; padding: 12px; margin: 8px 0; background: #080c1f; border: 1px solid #1a2050; border-radius: 8px; color: #fff;">
      <button onclick="login()" style="width: 100%; padding: 12px; background: #7b2ff7; color: #fff; border: none; border-radius: 8px; margin-top: 16px; cursor: pointer;">Login</button>
      <p id="error" style="color: #ff4444; display: none; margin-top: 16px;"></p>
    </div>
  </div>

  <!-- DASHBOARD CONTENT (hidden until login) -->
  <div id="dashboard" style="display: none;">
    <nav style="padding: 20px; background: #0d1230;">
      <span style="color: #00d4ff; font-weight: bold;">OPCLW Dashboard</span>
      <button onclick="logout()" style="float: right; background: #ff4444; color: #fff; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer;">Logout</button>
    </nav>
    <div style="padding: 40px;">
      <h1>Welcome to Dashboard</h1>
      <p>You're logged in!</p>
      <a href="/admin" style="color: #00d4ff;">Go to Admin Portal</a>
    </div>
  </div>

  <script>
    const supabase = supabase.createClient(
      'https://leasiwevraqnkcsjqasd.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYXNpd2V2cmFxbmtjc2pxYXNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE1OTgxOTgsImV4cCI6MjA4NzE3NDE5OH0.eSLIWTwV7NiI0I7xmPXxR5vVwLTLbHzPdtiWDnaGOo8'
    );

    async function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      const { data, error } = await supabase.auth.signInWithPassword({ email, password });
      
      if (error) {
        document.getElementById('error').textContent = error.message;
        document.getElementById('error').style.display = 'block';
        return;
      }
      
      document.getElementById('login-gate').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
    }

    async function logout() {
      await supabase.auth.signOut();
      location.reload();
    }

    // Check session on load
    supabase.auth.getSession().then(({ data: { session } }) => {
      if (session) {
        document.getElementById('login-gate').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
      }
    });
  </script>
</body>
</html>
